var _temp_local_var_2;
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_uiOpenExisting

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|3_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 563
*/
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_uiCurrentOpen

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|3_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 563
*/
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_uiClose

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|3_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 563
*/
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_uiFindAllType

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|3_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 563
*/
/*
WARNING: Recursive script decompilation (for asset type resolution) failed for gml_Script_uiFindAllType

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.DirectFunctionCall.DoTypePropagation(DecompileContext context, AssetIDType suggestedType) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Instructions\Decompiler.DirectFunctionCall.cs:line 139
*/
/*
WARNING: Recursive script decompilation (for asset type resolution) failed for gml_Script_uiClose

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.DirectFunctionCall.DoTypePropagation(DecompileContext context, AssetIDType suggestedType) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Instructions\Decompiler.DirectFunctionCall.cs:line 139
*/
/*
WARNING: Recursive script decompilation (for asset type resolution) failed for gml_Script_uiCurrentOpen

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.DirectFunctionCall.DoTypePropagation(DecompileContext context, AssetIDType suggestedType) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Instructions\Decompiler.DirectFunctionCall.cs:line 139
*/
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_uiCreate

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|3_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 563
*/
/*
WARNING: Recursive script decompilation (for asset type resolution) failed for gml_Script_uiOpenExisting

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.DirectFunctionCall.DoTypePropagation(DecompileContext context, AssetIDType suggestedType) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Instructions\Decompiler.DirectFunctionCall.cs:line 139
*/
/*
WARNING: Recursive script decompilation (for asset type resolution) failed for gml_Script_uiCreate

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.DirectFunctionCall.DoTypePropagation(DecompileContext context, AssetIDType suggestedType) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Instructions\Decompiler.DirectFunctionCall.cs:line 139
*/
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_uiGetData

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|3_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 563
*/
/*
WARNING: Recursive script decompilation (for asset type resolution) failed for gml_Script_uiGetData

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.DirectFunctionCall.DoTypePropagation(DecompileContext context, AssetIDType suggestedType) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Instructions\Decompiler.DirectFunctionCall.cs:line 139
*/
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_loot_get_durability

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 235
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|3_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 563
*/
/*
WARNING: Recursive script decompilation (for asset type resolution) failed for gml_Script_loot_get_durability

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 235
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.DirectFunctionCall.DoTypePropagation(DecompileContext context, AssetIDType suggestedType) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Instructions\Decompiler.DirectFunctionCall.cs:line 139
*/
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script___uiClassCommon

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|3_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 563
*/
/*
WARNING: Recursive script decompilation (for asset type resolution) failed for gml_Script___uiClassCommon

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 280
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Decompiler.cs:line 795
   at UndertaleModLib.Decompiler.Decompiler.DirectFunctionCall.DoTypePropagation(DecompileContext context, AssetIDType suggestedType) in D:\a\UndertaleModTool\UndertaleModTool\UndertaleModLib\Decompiler\Instructions\Decompiler.DirectFunctionCall.cs:line 139
*/
gml_Script_uiAddBoxType("UiDnDInventory", gml_Script_class_ui_inventory)
function class_ui_inventory() constructor //gml_Script_class_ui_inventory
{
    var _temp_local_var_2 = uiClassDnDInventory()
    if @@CopyStatic@@(gml_Script_uiClassDnDInventory)
    {
    }
    else
    {
        function anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_4716_class_ui_inventory_gml_GlobalScript_class_ui_inventory(argument0, argument1, argument2, argument3) //gml_Script_anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_4716_class_ui_inventory_gml_GlobalScript_class_ui_inventory
        {
            if (global.Dragging_Loot_Struct != undefined)
            {
                if (array_length(category) > 0)
                {
                    var _category = item_get_category(global.Dragging_Loot_Struct.__lootStruct.item)
                    if (array_find_index(category, _category) == undefined)
                        return false;
                }
            }
            if (is_in_hub() && ui_is_trading())
            {
                var _if_trading = gml_Script_uiFindRelaxed(uiLayerGetRoot("inventory layer"), "buy inventory", true)
                if (_if_trading != undefined && rectangle_in_rectangle(argument0, argument1, argument2, argument3, _if_trading.__localLeft, _if_trading.__localTop, _if_trading.__localRight, _if_trading.__localBottom))
                    return false;
                _if_trading = gml_Script_uiFindRelaxed(uiLayerGetRoot("inventory layer"), "other inventory", true)
                if (_if_trading != undefined && rectangle_in_rectangle(argument0, argument1, argument2, argument3, _if_trading.__localLeft, _if_trading.__localTop, _if_trading.__localRight, _if_trading.__localBottom))
                    return false;
            }
            return true;
        }

        function anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_6454_class_ui_inventory_gml_GlobalScript_class_ui_inventory(argument0) //gml_Script_anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_6454_class_ui_inventory_gml_GlobalScript_class_ui_inventory
        {
            var _i = 0
            repeat array_length(argument0)
            {
                uiOpen(gml_Script_class_ui_loot_preview)
                gml_Script_uiCurrentOpen().gml_Script_uiCurrentOpen().Set("loot", argument0[_i])
                gml_Script_uiClose()
                _i++
            }
        }

        function anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_6767_class_ui_inventory_gml_GlobalScript_class_ui_inventory(argument0) //gml_Script_anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_6767_class_ui_inventory_gml_GlobalScript_class_ui_inventory
        {
            _i = 0
            repeat array_length(argument0)
            {
                var _loot = argument0[_i]
                uiOpen(gml_Script_class_ui_loot_reward)
                gml_Script_uiCurrentOpen().gml_Script_uiCurrentOpen().Set("loot", _loot)
                var _position = self.FindEmptyPlace(gml_Script_uiCurrentOpen())
                if (_position == undefined)
                {
                    gml_Script_uiCurrentOpen().gml_Script_uiCurrentOpen().Set("visible", false)
                    gml_Script_uiCurrentOpen().gml_Script_uiCurrentOpen().Set("active", false)
                    _i++
                }
                else
                {
                    gml_Script_uiCurrentOpen().gml_Script_uiCurrentOpen().Set("x", _position[0])
                    gml_Script_uiCurrentOpen().gml_Script_uiCurrentOpen().Set("y", _position[1])
                    gml_Script_uiClose()
                    _i++
                }
            }
        }

        function anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_7552_class_ui_inventory_gml_GlobalScript_class_ui_inventory() //gml_Script_anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_7552_class_ui_inventory_gml_GlobalScript_class_ui_inventory
        {
            var _value = 0
            _i = 0
            repeat array_length(__children)
            {
                _value += loot_get_weight(__children[_i].__lootStruct)
                _i++
            }
            return _value;
        }

        function anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_7852_class_ui_inventory_gml_GlobalScript_class_ui_inventory() //gml_Script_anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_7852_class_ui_inventory_gml_GlobalScript_class_ui_inventory
        {
            _value = 0
            _i = 0
            repeat array_length(__children)
            {
                _value += loot_get_value(__children[_i].__lootStruct)
                _i++
            }
            return _value;
        }

        function anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_8305_class_ui_inventory_gml_GlobalScript_class_ui_inventory() //gml_Script_anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_8305_class_ui_inventory_gml_GlobalScript_class_ui_inventory
        {
            _value = 0
            _i = 0
            repeat array_length(__children)
            {
                var _multiplier = 1
                switch loot_get_category(__children[_i].__lootStruct)
                {
                    case "weapon":
                        _multiplier = gml_Script_difficulty_get("trade_price_weapon")
                        break
                    case "armor":
                        _multiplier = gml_Script_difficulty_get("trade_price_armor")
                        break
                    case "backpack":
                        _multiplier = gml_Script_difficulty_get("trade_price_backpack")
                        break
                    case "ammo":
                        _multiplier = gml_Script_difficulty_get("trade_price_ammo")
                        break
                    case "medication":
                        _multiplier = gml_Script_difficulty_get("trade_price_medication")
                        break
                }

                _value += (loot_get_value(__children[_i].__lootStruct) * _multiplier)
                _i++
            }
            return _value;
        }

        function anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_9209_class_ui_inventory_gml_GlobalScript_class_ui_inventory(argument0, argument1) //gml_Script_anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_9209_class_ui_inventory_gml_GlobalScript_class_ui_inventory
        {
            __highlightLeft = 0
            __highlightTop = 0
            __highlightRight = 0
            __highlightBottom = 0
            __highlightCollision = false
            var _pointerX = uiPointerGetX() - uiPointerGetCaptureX() - __worldLeft
            var _pointerY = uiPointerGetY() - uiPointerGetCaptureY() - __worldTop
            if (!argument1)
            {
                if (_pointerX < 0 || _pointerY < 0 || _pointerX > (__localRight - __localLeft) || _pointerY > (__localBottom - __localTop))
                    return undefined;
            }
            if ui_is_trading()
            {
                _if_trading = gml_Script_uiFind(uiLayerGetRoot("inventory layer"), "buy inventory")
                if point_in_rectangle(uiPointerGetX(), uiPointerGetY(), _if_trading.__localLeft, _if_trading.__localTop, _if_trading.__localRight, _if_trading.__localBottom)
                    return undefined;
                _if_trading = gml_Script_uiFind(uiLayerGetRoot("inventory layer"), "other inventory")
                if point_in_rectangle(uiPointerGetX(), uiPointerGetY(), _if_trading.__localLeft, _if_trading.__localTop, _if_trading.__localRight, _if_trading.__localBottom)
                    return undefined;
            }
            var _draggingWidth = "width".("width").Get(argument0)
            var _draggingHeight = "height".("height").Get(argument0)
            var _left = _pointerX - 0.5 * _draggingWidth
            var _top = _pointerY - 0.5 * _draggingHeight
            var _qLeft = round(_left / __cellWidth)
            var _qTop = round(_top / __cellHeight)
            var _qWidth = 1 + (floor(_draggingWidth / __cellWidth))
            var _qHeight = 1 + (floor(_draggingHeight / __cellHeight))
            _qLeft = clamp(_qLeft, 0, (__cellCountX - _qWidth))
            _qTop = clamp(_qTop, 0, (__cellCountY - _qHeight))
            var _qRight = _qLeft + _qWidth
            var _qBottom = _qTop + _qHeight
            _qLeft *= __cellWidth
            _qTop *= __cellHeight
            _qRight *= __cellWidth
            _qBottom *= __cellHeight
            __highlightCollision = false
            var _mergeTarget = undefined
            _i = 0
            repeat array_length(__children)
            {
                var _child = __children[_i]
                if (_child != argument0 && _qLeft._qLeft.RectangleCollides(_qTop, _qRight, _qBottom, overlapTolerance, _child))
                {
                    __highlightCollision = true
                    var _childLoot = _child.__lootStruct
                    var _childItem = loot_get_item(_childLoot)
                    if (_childItem == loot_get_item(argument0.__lootStruct) && loot_get_quantity(_childLoot) < item_get_stack_max(_childItem))
                        _mergeTarget = _child
                    break
                }
                else
                    _i++
            }
            if (_mergeTarget != undefined)
                __highlightCollision = false
            if ((!argument1) && __highlightCollision)
            {
                argument0.__dragRotation = argument0.__startingRotation
                return undefined;
            }
            else
            {
                __highlightLeft = _qLeft
                __highlightTop = _qTop
                __highlightRight = _qRight
                __highlightBottom = _qBottom
                return 
                {
                    __highlightLeft: _qLeft,
                    __highlightTop: _qTop,
                    __highlightRight: _qRight,
                    __highlightBottom: _qBottom,
                    x: (0.5 * (_qLeft + _qRight)),
                    y: (0.5 * (_qTop + _qBottom)),
                    mergeTarget: _mergeTarget
                };
            }
        }

    }
    backgroundColor = 0x585858
    gridLineColor = 0x464646
    gridLineThickness = 4
    highlightColor = c_white
    highlightAlpha = 0.4
    self.CallbackSetDnDOnReceive(function(argument0) //gml_Script_anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_13775_class_ui_inventory_gml_GlobalScript_class_ui_inventory
    {
        if (argument0 != undefined)
        {
            if (array_length(category) > 0)
            {
                _category = item_get_category(argument0.__lootStruct.item)
                if (array_find_index(category, _category) == undefined)
                    return;
            }
        }
        var _data = self.__HandleDnD(argument0, false)
        if (_data == undefined)
            return;
        _mergeTarget = _data.mergeTarget
        if (_mergeTarget == undefined)
        {
            if (keyboard_check(vk_control) && (!argument0.__quickMove))
            {
                global.UI_Item_Drag_Skip_Placement_Assignment = true
                var _oldLoot = argument0.__lootStruct
                if (_oldLoot.quantity > 1)
                {
                    if ((argument0.__localLeft div 8) != (_data.__highlightLeft div 8) || (argument0.__localTop div 8) != (_data.__highlightTop div 8))
                    {
                        var _oldQuantity = _oldLoot.quantity
                        _oldLoot.quantity = floor(_oldQuantity / 2)
                        var _newLoot = loot_duplicate(_oldLoot)
                        with (_newLoot)
                        {
                            quantity = ceil(_oldQuantity / 2)
                            x = _data.x / 4
                            y = _data.y / 4
                            placement = other.identifier
                        }
                        gml_Script_uiOpenExisting(self)
                        uiOpen(gml_Script_class_ui_item)
                        gml_Script_uiCurrentOpen().gml_Script_uiCurrentOpen().Set("loot", _newLoot)
                        gml_Script_uiCurrentOpen().gml_Script_uiCurrentOpen().Set("x", _data.x)
                        gml_Script_uiCurrentOpen().gml_Script_uiCurrentOpen().Set("y", _data.y)
                        gml_Script_uiClose()
                        gml_Script_uiClose()
                        ui_inventory_check_weight()
                    }
                }
            }
            else
            {
                self.self.ParentChange(argument0)
                "x".("x").Set(_data.x, argument0)
                "y".("y").Set(_data.y, argument0)
            }
        }
        else
        {
            var _targetLoot = _mergeTarget.__lootStruct
            var _draggingLoot = argument0.__lootStruct
            var _stackMax = item_get_stack_max(_targetLoot.item)
            if (_targetLoot.quantity >= _stackMax)
                return;
            var _decrement = min(_draggingLoot.quantity, (_stackMax - _targetLoot.quantity))
            var _targetValue = min(_stackMax, (_targetLoot.quantity + _draggingLoot.quantity))
            loot_decrement(_draggingLoot, _decrement)
            _targetLoot.quantity = _targetValue
            global.UI_Item_Drag_Skip_Placement_Assignment = true
        }
        var _deal_button = gml_Script_uiFindRelaxed(self.__FindRoot(), "deal button", true)
        if is_struct(_deal_button)
        {
            _deal_button.__label = language_get_string("Deal") + ": " + string(ui_trader_calculate_deal_value().net_value_for_player)
            _deal_button._deal_button.__UpdateSize()
        }
    }
)
    self.CallbackSetDraw(function() //gml_Script_anon_class_ui_inventory_gml_GlobalScript_class_ui_inventory_17033_class_ui_inventory_gml_GlobalScript_class_ui_inventory
    {
        _deal_button = gml_Script_uiFindRelaxed(self.__FindRoot(), "deal button", true)
        if is_struct(_deal_button)
        {
            _deal_button.__label = language_get_string("Deal") + ": " + string(ui_trader_calculate_deal_value().net_value_for_player)
            _deal_button._deal_button.__UpdateSize()
        }
        _left = __drawLeft + 3
        _top = __drawTop - 1
        var _right = __drawRight - 2
        var _bottom = __drawBottom - 2
        var _backgroundColor = merge_color(color, animBlend, animBlendAmount)
        var _gridLineColor = merge_color(gridLineColor, animBlend, animBlendAmount)
        var _scale = scale * animScale
        var _alpha = alpha * animAlpha
        var _oldColor = draw_get_color()
        var _oldAlpha = draw_get_alpha()
        draw_set_color(backgroundColor)
        draw_set_alpha(_alpha)
        draw_rectangle(_left, _top, _right, _bottom, false)
        var _left_draw = _left + __highlightLeft
        var _top_draw = _top + __highlightTop
        var _right_draw = _left + __highlightRight - 1
        var _bottom_draw = _top + __highlightBottom - 1
        if self._canPlaceHere(_left_draw, _top_draw, _right_draw, _bottom_draw)
        {
            if __highlightCollision
                draw_sprite_repeat(s_hud_item_visto, 0, _left_draw, _top_draw, _right_draw, _bottom_draw, 4, 4, c_red, 1)
            else
            {
                draw_set_color(highlightColor)
                draw_set_alpha(_alpha * highlightAlpha)
                draw_rectangle(_left_draw, _top_draw, _right_draw, _bottom_draw, false)
            }
        }
        if showGridLines
        {
            draw_set_color(_gridLineColor)
            draw_set_alpha(_alpha)
            var _x = _left + __cellWidth
            repeat (__cellCountX - 1)
            {
                draw_rectangle((_x - gridLineThickness), _top, (_x - 1), _bottom, false)
                _x += __cellWidth
            }
            var _y = _top + __cellHeight
            repeat (__cellCountY - 1)
            {
                draw_rectangle(_left, (_y - gridLineThickness), _right, (_y - 1), false)
                _y += __cellHeight
            }
        }
        draw_set_color(_oldColor)
        draw_set_alpha(_oldAlpha)
    }
)
}

